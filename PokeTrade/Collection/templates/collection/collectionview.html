<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Pokémon Collection</title>

  <!-- NES.css -->
  <link rel="stylesheet" href="https://unpkg.com/nes.css@2.3.0/css/nes.min.css" />
  <!-- Press Start 2P (pixel font) -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />

  <style>
    body {
      font-family: 'Press Start 2P', cursive;
      background: #24282f url('https://i.imgur.com/8eZbk49.png') repeat;
      margin: 0;
      padding: 0;
      color: #fff;
    }
    .container {
      width: 90%;
      max-width: 1000px;
      margin: 2rem auto;
      text-align: center;
    }
    h1 {
      margin-bottom: 1.5rem;
    }
    /* Grid for Pokémon cards */
    .collection-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 1rem;
      justify-items: center;
    }
    /* Base styling for cards */
    .pokemon-card {
      background: #333;
      padding: 1.5rem;
      border: 2px solid #555; /* Default border color */
      width: 150px;
    }
    .pokemon-sprite {
      display: block;
      margin: 0 auto 0.5rem auto;
      width: 100px;
    }
    .rarity-label {
      font-size: 0.8rem;
      margin-top: 0.5rem;
      display: inline-block;
      color: #ffce56;
    }

    /* Rarity-specific border colors */
    .pokemon-card.rarity-1 {
      border-color: #d3d3d3 !important;  /* Light gray */
    }
    .pokemon-card.rarity-2 {
      border-color: #90ee90 !important;  /* Light green */
    }
    .pokemon-card.rarity-3 {
      border-color: #add8e6 !important;  /* Light blue */
    }
    .pokemon-card.rarity-4 {
      border-color: #d8bfd8 !important;  /* Light purple (thistle) */
    }
    .pokemon-card.rarity-5 {
      border-color: #ffa500 !important;  /* Orange */
    }
    .pokemon-card.rarity-high {
      /* For rarity 6 or 7, use a vivid color or a simulated gradient effect if needed */
      border-color: #ff69b4 !important;  /* Hot pink as an example */
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="nes-text is-primary">My Pokémon Collection</h1>

    <!-- Navigation buttons -->
    <div style="margin-bottom:1rem;">
      <button class="nes-btn is-success" onclick="window.location.href='/roam';">
        Roaming Field
      </button>
      <button class="nes-btn" onclick="window.location.href='/';">
        Home
      </button>
    </div>

    <!-- Grid of Pokémon cards loaded from the database -->
    <div class="collection-grid">
      {% for pokemon in pokemons %}
        <div class="pokemon-card
          {% if pokemon.rarity == 1 %}
            rarity-1
          {% elif pokemon.rarity == 2 %}
            rarity-2
          {% elif pokemon.rarity == 3 %}
            rarity-3
          {% elif pokemon.rarity == 4 %}
            rarity-4
          {% elif pokemon.rarity == 5 %}
            rarity-5
          {% elif pokemon.rarity == 6 or pokemon.rarity == 7 %}
            rarity-high
          {% endif %}">
          <img src="{{ pokemon.sprite }}" alt="{{ pokemon.name }}" class="pokemon-sprite" />
          <p>{{ pokemon.name }}</p>
          <span class="rarity-label">Rarity: {{ pokemon.rarity }}</span>
        </div>
      {% empty %}
        <p>You have no Pokémon in your collection yet!</p>
      {% endfor %}

      <!-- Form/button to generate a new Pokémon -->
      <form action="{% url 'generate_pokemon' %}" method="post">
        {% csrf_token %}
        <button type="submit" class="nes-btn is-primary">
          Generate Pokémon
        </button>
      </form>
    </div>
  </div>
</body>
</html>
